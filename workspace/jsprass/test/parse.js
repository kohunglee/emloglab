"use strict";var RESERVED_WORDS=["abstract async await boolean byte char double enum export final float goto implements import int interface let long native package private protected public short static super synchronized this throws transient volatile yield",KEYWORDS_ATOM="false null true",KEYWORDS="break case catch class const continue debugger default delete do else extends finally for function if in instanceof new return switch throw try typeof var void while with"].join(" "),KEYWORDS_BEFORE_EXPRESSION="return new delete throw else case",KEYWORDS=makePredicate(KEYWORDS),RESERVED_WORDS=makePredicate(RESERVED_WORDS),KEYWORDS_BEFORE_EXPRESSION=makePredicate(KEYWORDS_BEFORE_EXPRESSION),KEYWORDS_ATOM=makePredicate(KEYWORDS_ATOM),RE_BIN_NUMBER=/^0b([01]+)$/i,RE_HEX_NUMBER=/^0x([0-9a-f]+)$/i,RE_OCT_NUMBER=/^0o?([0-7]+)$/i,OPERATORS=makePredicate(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%","**",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=","**=",">>=","<<=",">>>=","&=","|=","^=","&&","||","??","&&=","||=","??="]),NEWLINE_CHARS="\n\r\u2028\u2029",OPERATOR_CHARS="+-*&%=<>!?|~^",PUNC_OPENERS="[{(",PUNC_SEPARATORS=",;:",PUNC_CLOSERS=")}]",PUNC_AFTER_EXPRESSION=PUNC_SEPARATORS+PUNC_CLOSERS,PUNC_BEFORE_EXPRESSION=PUNC_OPENERS+PUNC_SEPARATORS,PUNC_CHARS=PUNC_BEFORE_EXPRESSION+"`"+PUNC_CLOSERS,WHITESPACE_CHARS=NEWLINE_CHARS+"  \t\f\v​             　\ufeff",NON_IDENTIFIER_CHARS=makePredicate(characters("./'\"#"+OPERATOR_CHARS+PUNC_CHARS+WHITESPACE_CHARS));function is_surrogate_pair_head(e){return 55296<=e&&e<=56319}function is_surrogate_pair_tail(e){return 56320<=e&&e<=57343}function is_digit(e){return 48<=e&&e<=57}function is_identifier_char(e){return!NON_IDENTIFIER_CHARS[e]}function is_identifier_string(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)}function decode_escape_sequence(e){switch(e[0]){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"u":if("{"==e[1]&&"}"==e.slice(-1))n=e.slice(2,-1);else{if(5!=e.length)return;n=e.slice(1)}return(n=parseInt(n,16))<0||isNaN(n)?void 0:n<65536?String.fromCharCode(n):1114111<n?void 0:String.fromCharCode(55232+(n>>10))+String.fromCharCode(56320+(1023&n));case"v":return"\v";case"x":var n;return 3!=e.length?void 0:(n=parseInt(e.slice(1),16))<0||isNaN(n)?void 0:String.fromCharCode(n);case"\r":case"\n":return"";default:return"0"==e?"\0":"0"<=e[0]&&e[0]<="9"?void 0:e}}function parse_js_number(e){var n;return(n=RE_BIN_NUMBER.exec(e))?parseInt(n[1],2):(n=RE_HEX_NUMBER.exec(e))?parseInt(n[1],16):(n=RE_OCT_NUMBER.exec(e))?parseInt(n[1],8):(n=parseFloat(e))==e?n:void 0}function JS_Parse_Error(e,n,t,r,a){this.message=e,this.filename=n,this.line=t,this.col=r,this.pos=a;try{throw new SyntaxError(e,n,t,r)}catch(e){configure_error_stack(this,e)}}function js_error(e,n,t,r,a){throw new JS_Parse_Error(e,n,t,r,a)}function is_token(e,n,t){return e.type==n&&(null==t||e.value==t)}NEWLINE_CHARS=makePredicate(characters(NEWLINE_CHARS)),OPERATOR_CHARS=makePredicate(characters(OPERATOR_CHARS)),PUNC_AFTER_EXPRESSION=makePredicate(characters(PUNC_AFTER_EXPRESSION)),PUNC_BEFORE_EXPRESSION=makePredicate(characters(PUNC_BEFORE_EXPRESSION)),PUNC_CHARS=makePredicate(characters(PUNC_CHARS)),WHITESPACE_CHARS=makePredicate(characters(WHITESPACE_CHARS)),JS_Parse_Error.prototype=Object.create(SyntaxError.prototype),JS_Parse_Error.prototype.constructor=JS_Parse_Error;var EX_EOF={};function tokenizer(r,a,o,s){var i={text:r,filename:a,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],directives:Object.create(null),read_template:e("Unterminated template literal",function(e){for(var n="";;){var t=r();switch(t){case"\\":t+=r();break;case"`":return void e.push(n);case"$":if("{"==c())return l(),e.push(n),i.regex_allowed=!0}n+=t}function r(){var e=l(!0,!0);return"\r"==e?"\n":e}})},u=!1;function c(){return i.text.charAt(i.pos)}function l(e,n){var t=i.text.charAt(i.pos++);if(e&&!t)throw EX_EOF;return NEWLINE_CHARS[t]?(i.col=0,i.line++,n||(i.newline_before=!0),"\r"==t&&"\n"==c()&&(i.pos++,t="\n")):i.col++,t}function _(e){for(;0<e--;)l()}function f(e){return i.text.substr(i.pos,e.length)==e}function p(){i.tokline=i.line,i.tokcol=i.col,i.tokpos=i.pos}function d(e,n,t){i.regex_allowed="operator"==e&&!UNARY_POSTFIX[n]||"keyword"==e&&KEYWORDS_BEFORE_EXPRESSION[n]||"punc"==e&&PUNC_BEFORE_EXPRESSION[n],"punc"==e&&"."==n?u=!0:t||(u=!1);n={type:e,value:n,line:i.tokline,col:i.tokcol,pos:i.tokpos,endline:i.line,endcol:i.col,endpos:i.pos,nlb:i.newline_before,file:a};return/^(?:num|string|regexp)$/i.test(e)&&(n.raw=r.substring(n.pos,n.endpos)),t||(n.comments_before=i.comments_before,n.comments_after=i.comments_before=[]),i.newline_before=!1,new AST_Token(n)}function S(e){js_error(e,a,i.tokline,i.tokcol,i.tokpos)}function A(e){return/^0[0-7_]+$/.test(e)}function m(e){var t=!1,r=!1,a=!1,o="."==e,n=function(e){for(var n,t="";(n=c())&&e(n,t);)t+=l();return t}(function(e,n){switch(e){case"x":case"X":return!a&&(a=!0);case"e":case"E":return a||!t&&(t=r=!0);case"+":case"-":return r;case r=!1,".":return!(o||t||a||A(n))&&(o=!0)}return/[_0-9a-dfo]/i.test(e)}),e=(A(n=e?e+n:n)?E.has_directive("use strict")&&S("Legacy octal literals are not allowed in strict mode"):n=n.replace(a?/([1-9a-f]|.0)_(?=[0-9a-f])/gi:/([1-9]|.0)_(?=[0-9])/gi,"$1"),parse_js_number(n));return isNaN(e)&&S("Invalid syntax: "+n),o||t||"n"!=c()?d("num",e):(l(),d("bigint",n.toLowerCase()))}function v(e){var n,t=l(!0,e);if("0"<=t&&t<="7")return n=t,"0"<=(a=c())&&a<="7"&&(n+=l(!0))[0]<="3"&&"0"<=(a=c())&&a<="7"&&(n+=l(!0)),"0"===n?"\0":(0<n.length&&E.has_directive("use strict")&&S("Legacy octal escape sequences are not allowed in strict mode"),String.fromCharCode(parseInt(n,8)));if("u"==t){var r=l(!0,e);if(t+=r,"{"!=r)t+=l(!0,e)+l(!0,e)+l(!0,e);else for(;t+=r=l(!0,e),"}"!=r;);}else"x"==t&&(t+=l(!0,e)+l(!0,e));var a=decode_escape_sequence(t);return"string"!=typeof a&&S("Invalid escape sequence: \\"+t),a}var T=e("Unterminated string constant",function(e){for(var n=l(),t="";;){var r=l(!0,!0);if("\\"==r)r=v(!0);else if(NEWLINE_CHARS[r])S("Unterminated string constant");else if(r==n)break;t+=r}var a=d("string",t);return a.quote=e,a});function k(e){var n,t=i.regex_allowed,r=function(){for(var e=i.text,n=i.pos;n<i.text.length;++n)if(NEWLINE_CHARS[e[n]])return n;return-1}();return-1==r?(n=i.text.substr(i.pos),i.pos=i.text.length):(n=i.text.substring(i.pos,r),i.pos=r),i.col=i.tokcol+(i.pos-i.tokpos),i.comments_before.push(d(e,n,!0)),i.regex_allowed=t,E}var w=e("Unterminated multiline comment",function(){var e=i.regex_allowed,n=function(e,n){if(e=i.text.indexOf(e,i.pos),n&&-1==e)throw EX_EOF;return e}("*/",!0),n=i.text.substring(i.pos,n).replace(/\r\n|\r|\u2028|\u2029/g,"\n");return _(n.length+2),i.comments_before.push(d("comment2",n,!0)),i.regex_allowed=e,E});function y(){for(var e,n,t=!1,r=!1,a="#"==c()?l():"";e=c();)if(t)"u"!=e&&S("Expecting UnicodeEscapeSequence -- uXXXX"),is_identifier_char(e=v())||S("Unicode char: "+e.charCodeAt(0)+" is not valid in identifier"),a+=e,t=!1;else if("\\"==e)r=t=!0,l();else{if(!is_identifier_char(e))break;a+=l()}return KEYWORDS[a]&&r&&(n=a.charCodeAt(0).toString(16).toUpperCase(),a="\\u"+"0000".substr(n.length)+n+a.slice(1)),a}var b=e("Unterminated regular expression",function(e){for(var n,t=!1,r=!1;n=l(!0);)if(NEWLINE_CHARS[n])S("Unexpected line terminator");else if(t)e+="\\"+n,t=!1;else if("["==n)r=!0,e+=n;else if("]"==n&&r)r=!1,e+=n;else{if("/"==n&&!r)break;"\\"==n?t=!0:e+=n}var a=y();try{var o=new RegExp(e,a);return o.raw_source=e,d("regexp",o)}catch(e){S(e.message)}});function h(e){return d("operator",function e(n){var t;return c()&&(t=n+c(),OPERATORS[t])?(l(),e(t)):n}(e||l()))}function e(n,t){return function(e){try{return t(e)}catch(e){if(e!==EX_EOF)throw e;S(n)}}}function E(e){if(null!=e)return b(e);for(s&&0==i.pos&&f("#!")&&(p(),_(2),k("comment5"));;){for(;WHITESPACE_CHARS[c()];)l();if(p(),o){if(f("\x3c!--")){_(4),k("comment3");continue}if(f("--\x3e")&&i.newline_before){_(3),k("comment4");continue}}var n=c();if(!n)return d("eof");var t=n.charCodeAt(0);switch(t){case 34:case 39:return T(n);case 46:return l(),f("..")?d("operator","."+l()+l()):is_digit(c().charCodeAt(0))?m("."):d("punc",".");case 47:var r=function(){switch(l(),c()){case"/":return l(),k("comment1");case"*":return l(),w()}return i.regex_allowed?b(""):h("/")}();if(r===E)continue;return r}if(is_digit(t))return m();if(PUNC_CHARS[n])return d("punc",l());if(f("=>"))return d("punc",l()+l());if(OPERATOR_CHARS[n])return h();if(35!=t&&92!=t&&NON_IDENTIFIER_CHARS[n])break;return t=void 0,t=y(),u?d("name",t):KEYWORDS_ATOM[t]?d("atom",t):KEYWORDS[t]?OPERATORS[t]?d("operator",t):d("keyword",t):d("name",t)}S("Unexpected character '"+n+"'")}return E.context=function(e){return i=e?e:i},E.add_directive=function(e){i.directives[e]=!0},E.push_directives_stack=function(){i.directives=Object.create(i.directives)},E.pop_directives_stack=function(){i.directives=Object.getPrototypeOf(i.directives)},E.has_directive=function(e){return!!i.directives[e]},E}var UNARY_PREFIX=makePredicate("typeof void delete -- ++ ! ~ - +"),UNARY_POSTFIX=makePredicate("-- ++"),ASSIGNMENT=makePredicate("= += -= /= *= %= **= >>= <<= >>>= &= |= ^= &&= ||= ??="),PRECEDENCE=function(e,n){for(var t=0;t<e.length;)for(var r=e[t++],a=0;a<r.length;a++)n[r[a]]=t;return n}([["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),ATOMIC_START_TOKEN=makePredicate("atom bigint num regexp string");function parse(e,g){g=defaults(g,{bare_returns:!1,expression:!1,filename:null,html5_comments:!0,module:!1,shebang:!0,strict:!1,toplevel:null},!0);var R={input:"string"==typeof e?tokenizer(e,g.filename,g.html5_comments,g.shebang):e,in_async:!1,in_directives:!0,in_funarg:-1,in_function:0,in_generator:!1,in_loop:0,labels:[],peeked:null,prev:null,token:null};function C(e,n){return is_token(R.token,e,n)}function O(){return R.peeked||(R.peeked=R.input())}function N(){return R.prev=R.token,R.peeked?(R.token=R.peeked,R.peeked=null):R.token=R.input(),R.in_directives=R.in_directives&&("string"==R.token.type||C("punc",";")),R.token}function x(){return R.prev}function P(e,n,t,r){var a=R.input.context();js_error(e,a.filename,null!=n?n:a.tokline,null!=t?t:a.tokcol,null!=r?r:a.tokpos)}function D(e,n){P(n,e.line,e.col)}function r(e,n){return e+(void 0===n?"":" «"+n+"»")}function I(e){D(e=null==e?R.token:e,"Unexpected token: "+r(e.type,e.value))}function F(e,n){if(C(e,n))return N();D(R.token,"Unexpected token: "+r(R.token.type,R.token.value)+", expected: "+r(e,n))}function U(e){F("punc",e)}function H(e){return e.nlb||!all(e.comments_before,function(e){return!e.nlb})}function Z(){return!g.strict&&(C("eof")||C("punc","}")||H(R.token))}function W(e){C("punc",";")?N():e||Z()||U(";")}function X(){U("(");var e=J();return U(")"),e}function n(r){return function(){var e=R.token,n=r.apply(null,arguments),t=x();return n.start=e,n.end=t,n}}function j(){(C("operator","/")||C("operator","/="))&&(R.peeked=null,R.token=R.input(R.token.value.substr(1)))}R.token=N();var Y=n(function(e){switch(j(),R.token.type){case"string":var n=R.in_directives,t=J();return n&&(t instanceof AST_String?(w=t.start.raw.slice(1,-1),R.input.add_directive(w),t.value=w):R.in_directives=n=!1),W(),n?new AST_Directive(t):new AST_SimpleStatement({body:t});case"num":case"bigint":case"regexp":case"operator":case"atom":return K();case"name":switch(R.token.value){case"async":if(is_token(O(),"keyword","function"))return N(),N(),C("operator","*")?(N(),V(AST_AsyncGeneratorDefun)):V(AST_AsyncDefun);break;case"await":if(R.in_async)return K();break;case"export":if(e||""===g.module||I(),N(),C("operator","*"))return s=o=R.token,N(),C("name","as")&&(N(),te()||F("name"),s=R.token,N()),F("name","from"),new AST_ExportForeign({aliases:[B(s)],keys:[B(o)],path:re()});if(C("punc","{")){N();for(var r=[],a=[];te();){var o=R.token;N(),a.push(o),C("name","as")?(N(),te()||F("name"),r.push(R.token),N()):r.push(o),C("punc","}")||U(",")}return(U("}"),C("name","from"))?(N(),new AST_ExportForeign({aliases:r.map(B),keys:a.map(B),path:re()})):(W(),new AST_ExportReferences({properties:a.map(function(e,n){is_token(e,"name")||D(e,"Name expected");e=le(AST_SymbolExport,e);return e.alias=B(r[n]),e})}))}return C("keyword","default")?(N(),s=R.token,(c=function(){if(C("name","async")){if(is_token(O(),"keyword","function"))return N(),N(),C("operator","*")?(N(),M(AST_AsyncGeneratorDefun,V(AST_AsyncGeneratorFunction))):M(AST_AsyncDefun,V(AST_AsyncFunction))}else if(C("keyword"))switch(R.token.value){case"class":return N(),M(AST_DefClass,ne(AST_ClassExpression));case"function":return(N(),C("operator","*"))?(N(),M(AST_GeneratorDefun,V(AST_GeneratorFunction))):M(AST_Defun,V(AST_Function))}}())?(c.start=s,c.end=x()):(j(),c=J(),W()),new AST_ExportDefault({body:c})):new AST_ExportDeclaration({body:ae()});case"import":var s=O();if("punc"==s.type&&/^[(.]$/.test(s.value))break;e||""===g.module||I(),N();var i,u,c=null,l=G(AST_SymbolImport,!0),_=null;if(l?(l.key=new AST_String({start:l.start,value:"",end:l.end}),(i=C("punc",","))&&N()):i=!C("string"),i)if(C("operator","*")){var f=R.token;N(),F("name","as"),(c=G(AST_SymbolImport)).key=B(f)}else{for(U("{"),_=[];te();)is_token(O(),"name","as")?(f=R.token,N(),N(),(u=G(AST_SymbolImport)).key=B(f)):(u=G(AST_SymbolImport)).key=new AST_String({start:u.start,value:u.name,end:u.end}),_.push(u),C("punc","}")||U(",");U("}")}return(c||l||_)&&F("name","from"),new AST_Import({all:c,default:l,path:re(),properties:_});case"let":if(se())return N(),p=ue(),W(),p;break;case"yield":if(R.in_generator)return K()}return(is_token(O(),"punc",":")?function(){var n=G(AST_Label);all(R.labels,function(e){return e.name!=n.name})||P("Label "+n.name+" defined twice");U(":"),R.labels.push(n);var e=Y();R.labels.pop(),e instanceof AST_IterationStatement||n.references.forEach(function(e){e instanceof AST_Continue&&D(e.label.start,"Continue label `"+n.name+"` must refer to IterationStatement")});return new AST_LabeledStatement({body:e,label:n})}:K)();case"punc":switch(R.token.value){case"{":return new AST_BlockStatement({start:R.token,body:L(),end:x()});case"[":case"(":case"`":return K();case";":return R.in_directives=!1,N(),new AST_EmptyStatement;default:I()}case"keyword":switch(R.token.value){case"break":return N(),ee(AST_Break);case"class":return N(),ne(AST_DefClass);case"const":N();var p=ie();return W(),p;case"continue":return N(),ee(AST_Continue);case"debugger":return N(),W(),new AST_Debugger;case"do":N();var t=Q(Y),d=(F("keyword","while"),X());return W(!0),new AST_Do({body:t,condition:d});case"while":return N(),new AST_While({condition:X(),body:Q(Y)});case"for":N();var d=C("name","await")&&N(),S=(U("("),null);if(!d&&C("punc",";")||(S=(C("keyword","const")?(N(),ie):C("name","let")&&se()?(N(),ue):C("keyword","var")?(N(),ce):J)(!0),d?(F("name","of"),T=AST_ForAwaitOf):C("operator","in")?(N(),T=AST_ForIn):C("name","of")&&(N(),T=AST_ForOf),!T))return A=S,U(";"),m=C("punc",";")?null:J(),U(";"),v=C("punc",")")?null:J(),U(")"),new AST_For({init:A,condition:m,step:v,body:Q(Y)});S instanceof AST_Definitions?(1<S.definitions.length&&D(S.start,"Only one variable declaration allowed in for..in/of loop"),T!==AST_ForIn&&S.definitions[0].value&&D(S.definitions[0].value.start,"No initializers allowed in for..of loop")):$(S)||(S=z(S))instanceof AST_Destructured||D(S.start,"Invalid left-hand side in for..in/of loop");var A=T,m=S,v=(j(),J());return U(")"),new A({init:m,object:v,body:Q(Y)});case"function":return(N(),C("operator","*"))?(N(),V(AST_GeneratorDefun)):V(AST_Defun);case"if":N();var T=X(),S=Y(),k=null;return C("keyword","else")&&(N(),k=Y()),new AST_If({condition:T,body:S,alternative:k});case"return":0!=R.in_function||g.bare_returns||P("'return' outside of function"),N();var w=null;return C("punc",";")?N():Z()||(w=J(),W()),new AST_Return({value:w});case"switch":return N(),new AST_Switch({expression:X(),body:Q(oe)});case"throw":N(),H(R.token)&&P("Illegal newline after 'throw'");w=J();return W(),new AST_Throw({value:w});case"try":N();var y,b,k=L(),h=null,E=null;return C("keyword","catch")&&(b=R.token,N(),y=null,C("punc","(")&&(N(),y=q(AST_SymbolCatch),U(")")),h=new AST_Catch({start:b,argname:y,body:L(),end:x()})),C("keyword","finally")&&(b=R.token,N(),E=new AST_Finally({start:b,body:L(),end:x()})),h||E||P("Missing catch/finally blocks"),new AST_Try({body:k,bcatch:h,bfinally:E});case"var":N();p=ce();return W(),p;case"with":return R.input.has_directive("use strict")&&P("Strict mode may not include a with statement"),N(),new AST_With({expression:X(),body:Y()})}}I()});function K(){var e=J();return W(),new AST_SimpleStatement({body:e})}function ee(e){var n,t=null,e=(null!=(t=Z()?t:G(AST_LabelRef,!0))?((n=find_if(function(e){return e.name==t.name},R.labels))||D(t.start,"Undefined label "+t.name),t.thedef=n):0==R.in_loop&&P(e.TYPE+" not inside a loop or switch"),W(),new e({label:t}));return n&&n.references.push(e),e}function A(e,n){if(C("name",e)){e=O();if(e&&!is_token(e,"operator","=")&&!("punc"==e.type&&/^[(;}]$/.test(e.value)||n&&H(e)))return N()}}function ne(e){for(var n,t=R.in_async,r=R.in_generator,a=(R.input.push_directives_stack(),R.input.add_directive("use strict"),n=e===AST_DefClass?G(AST_SymbolDefClass):G(AST_SymbolClass,!0),null),o=(C("keyword","extends")&&(N(),j(),a=m(!0)),U("{"),[]);!C("punc","}");)if(C("punc",";"))N();else{var s=R.token,i=!!A("static"),u=A("async",!0);if(C("operator","*")){N();var c=C("name")&&/^#/.test(R.token.value),l=d(),_=R.token,f=V(u?AST_AsyncGeneratorFunction:AST_GeneratorFunction);f.start=_,f.end=x(),o.push(new AST_ClassMethod({start:s,static:i,private:c,key:l,value:f,end:x()}))}else if(i&&C("punc","{"))o.push(new AST_ClassInit({start:s,value:new AST_ClassInitBlock({start:s,body:L(),end:x()}),end:x()}));else{c=C("name")&&/^#/.test(R.token.value),l=d();if(C("punc","(")){_=R.token,f=V(u?AST_AsyncFunction:AST_Function);f.start=_,f.end=x(),o.push(new AST_ClassMethod({start:s,static:i,private:c,key:l,value:f,end:x()}))}else{u&&I(u);u=null;if(C("operator","="))N(),R.in_async=!1,R.in_generator=!1,u=S(),R.in_generator=r,R.in_async=t;else if(!C("punc",";")&&!C("punc","}")){var p=null;switch(l){case"get":p=AST_ClassGetter;break;case"set":p=AST_ClassSetter}if(p){o.push(new p({start:s,static:i,private:C("name")&&/^#/.test(R.token.value),key:d(),value:T(),end:x()}));continue}}W(),o.push(new AST_ClassField({start:s,static:i,private:c,key:l,value:u,end:x()}))}}}return N(),R.input.pop_directives_stack(),R.in_generator=r,R.in_async=t,new e({extends:a,name:n,properties:o})}function _(e){var n;return e instanceof AST_Array?(n=null,e.elements[e.elements.length-1]instanceof AST_Spread&&(n=_(e.elements.pop().expression)),new AST_DestructuredArray({start:e.start,elements:e.elements.map(_),rest:n,end:e.end})):e instanceof AST_Assign?new AST_DefaultValue({start:e.start,name:_(e.left),value:e.right,end:e.end}):e instanceof AST_DefaultValue?(e.name=_(e.name),e):e instanceof AST_DestructuredArray?(e.elements=e.elements.map(_),e.rest&&(e.rest=_(e.rest)),e):e instanceof AST_DestructuredObject?(e.properties.forEach(function(e){e.value=_(e.value)}),e.rest&&(e.rest=_(e.rest)),e):e instanceof AST_Hole?e:e instanceof AST_Object?(n=null,e.properties[e.properties.length-1]instanceof AST_Spread&&(n=_(e.properties.pop().expression)),new AST_DestructuredObject({start:e.start,properties:e.properties.map(function(e){return e instanceof AST_ObjectKeyVal||D(e.start,"Invalid destructuring assignment"),new AST_DestructuredKeyVal({start:e.start,key:e.key,value:_(e.value),end:e.end})}),rest:n,end:e.end})):e instanceof AST_SymbolFunarg?e:e instanceof AST_SymbolRef?new AST_SymbolFunarg(e):e instanceof AST_Yield?new AST_SymbolFunarg({start:e.start,name:"yield",end:e.end}):void D(e.start,"Invalid arrow parameter")}function l(e,n,t){var r,a,o=R.in_async,s=R.in_generator,i=(R.in_async=t,R.in_generator=!1,R.in_funarg),u=(R.in_funarg=R.in_function,e.map(_)),e=(e=e.rest||null)&&_(e),i=(R.in_funarg=i,U("=>"),R.in_loop),c=R.labels,l=(++R.in_function,R.input.push_directives_stack(),R.in_loop=0,R.labels=[],a=C("punc","{")?(R.in_directives=!0,r=L(),null):(r=[],j(),S()),R.input.has_directive("use strict")),i=(R.input.pop_directives_stack(),--R.in_function,R.in_loop=i,R.labels=c,R.in_generator=s,R.in_async=o,new(t?AST_AsyncArrow:AST_Arrow)({start:n,argnames:u,rest:e,body:r,value:a,end:x()}));return l&&i.each_argname(w),i}var V=function(e){var n,t=R.in_async,r=R.in_generator,a=(/Defun$/.test(e.TYPE)?(n=G(AST_SymbolDefun),R.in_async=/^Async/.test(e.TYPE),R.in_generator=/Generator/.test(e.TYPE)):(R.in_async=/^Async/.test(e.TYPE),R.in_generator=/Generator/.test(e.TYPE),n=G(AST_SymbolLambda,!0)),!n||e===AST_Accessor||n instanceof AST_SymbolDeclaration||I(x()),U("("),R.in_funarg),o=(R.in_funarg=R.in_function,f(")",!g.strict,!1,function(){return c(AST_SymbolFunarg)})),a=(R.in_funarg=a,R.in_loop),s=R.labels,i=(++R.in_function,R.in_directives=!0,R.input.push_directives_stack(),R.in_loop=0,R.labels=[],L()),u=R.input.has_directive("use strict"),a=(R.input.pop_directives_stack(),--R.in_function,R.in_loop=a,R.labels=s,R.in_generator=r,R.in_async=t,new e({name:n,argnames:o,rest:o.rest||null,body:i}));return u&&(n&&w(n),a.each_argname(w)),a};function te(){return C("name")||C("string")||is_identifier_string(R.token.value)}function B(e){return new AST_String({start:e,quote:e.quote,value:e.value,end:e})}function re(){var e=R.token;return F("string"),W(),B(e)}function M(e,n){return n.name&&((n=new e(n)).name=new(e===AST_DefClass?AST_SymbolDefClass:AST_SymbolDefun)(n.name)),n}var ae=n(function(){if(C("name"))switch(R.token.value){case"async":return(N(),F("keyword","function"),C("operator","*"))?(N(),V(AST_AsyncGeneratorDefun)):V(AST_AsyncDefun);case"let":N();var e=ue();return W(),e}else if(C("keyword"))switch(R.token.value){case"class":return N(),ne(AST_DefClass);case"const":N();e=ie();return W(),e;case"function":return(N(),C("operator","*"))?(N(),V(AST_GeneratorDefun)):V(AST_Defun);case"var":N();e=ce();return W(),e}I()});function L(){U("{");for(var e=[];!C("punc","}");)C("eof")&&U("}"),e.push(Y());return N(),e}function oe(){U("{");for(var e,n,t,r,a=[];!C("punc","}");)C("eof")&&U("}"),C("keyword","case")?(e&&(e.end=x()),n=[],e=new AST_Case({start:(r=R.token,N(),r),expression:J(),body:n}),a.push(e),U(":")):C("keyword","default")?(e&&(e.end=x()),t&&P("More than one default clause in switch statement"),n=[],e=new AST_Default({start:(r=R.token,N(),U(":"),r),body:n}),a.push(e),t=e):(n||I(),n.push(Y()));return e&&(e.end=x()),N(),a}function a(e,n){for(var t=[];;){var r=R.token,a=q(e),o=null;if(C("operator","=")?(N(),o=S(n)):!n&&(e===AST_SymbolConst||a instanceof AST_Destructured)&&P("Missing initializer in declaration"),t.push(new AST_VarDef({start:r,name:a,value:o,end:x()})),!C("punc",","))break;N()}return t}function se(){var e=O();return is_token(e,"name")||is_token(e,"punc","[")||is_token(e,"punc","{")}var ie=function(e){return new AST_Const({start:x(),definitions:a(AST_SymbolConst,e),end:x()})},ue=function(e){return new AST_Let({start:x(),definitions:a(AST_SymbolLet,e),end:x()})},ce=function(e){return new AST_Var({start:x(),definitions:a(AST_SymbolVar,e),end:x()})};var m=function(e){if(C("operator","new"))return n=e,i=R.token,F("operator","new"),(u=C("punc",".")&&is_token(O(),"name","target")?(N(),N(),new AST_NewTarget):(u=m(!1),c=C("punc","(")?(N(),f(")",!g.strict)):[],new AST_New({expression:u,args:c}))).start=i,u.end=x(),p(u,n);var n,t,r,a=R.token;if(C("punc")){switch(a.value){case"`":return p(y(null),e);case"(":return(N(),C("punc",")"))?(N(),l([],a)):(t=J(!1,!0),r=a.comments_before.length,[].unshift.apply(t.start.comments_before,a.comments_before),a.comments_before.length=0,a.comments_before=t.start.comments_before,0==(a.comments_before_length=r)&&0<a.comments_before.length&&((r=a.comments_before[0]).nlb||(r.nlb=a.nlb,a.nlb=!1)),a.comments_after=t.start.comments_after,t.start=a,U(")"),(r=x()).comments_before=t.end.comments_before,r.comments_after.forEach(function(e){t.end.comments_after.push(e),e.nlb&&(R.token.nlb=!0)}),r.comments_after.length=0,r.comments_after=t.end.comments_after,t.end=r,C("punc","=>")?l(t instanceof AST_Sequence?t.expressions:[t],a):p(t,e));case"[":return p(v(),e);case"{":return p(k(),e)}I()}if(C("keyword"))switch(a.value){case"class":N();var o=ne(AST_ClassExpression);return o.start=a,o.end=x(),p(o,e);case"function":return N(),(s=C("operator","*")?(N(),V(AST_GeneratorFunction)):V(AST_Function)).start=a,s.end=x(),p(s,e)}if(C("name")){var s,i,u,c=le(AST_SymbolRef,a);if(N(),"async"==c.name){if(C("keyword","function"))return N(),(s=C("operator","*")?(N(),V(AST_AsyncGeneratorFunction)):V(AST_AsyncFunction)).start=a,s.end=x(),p(s,e);if(C("name")&&is_token(O(),"punc","=>"))return a=R.token,c=le(AST_SymbolRef,a),N(),l([c],a,!0);if(C("punc","("))return i=p(c,e),C("punc","=>")?((u=i.args)[u.length-1]instanceof AST_Spread&&(u.rest=u.pop().expression),l(u,a,!0)):i}return C("punc","=>")?l([c],a):p(c,e)}if(ATOMIC_START_TOKEN[R.token.type])return p(function(){var e,n=R.token,t=n.value;switch(n.type){case"num":isFinite(t)?e=new AST_Number({value:t}):(e=new AST_Infinity,t<0&&(e=new AST_UnaryPrefix({operator:"-",expression:e})));break;case"bigint":e=new AST_BigInt({value:t});break;case"string":e=new AST_String({value:t,quote:n.quote});break;case"regexp":e=new AST_RegExp({value:t});break;case"atom":switch(t){case"false":e=new AST_False;break;case"true":e=new AST_True;break;case"null":e=new AST_Null;break;default:I()}break;default:I()}return N(),e.start=e.end=n,e}(),e);I()};function f(e,n,t,r){r=r||S;for(var a=!0,o=[];!C("punc",e)&&(a?a=!1:U(","),!n||!C("punc",e));)if(t&&C("punc",","))o.push(new AST_Hole({start:R.token,end:R.token}));else if(C("operator","...")){if(r!==S){N(),o.rest=r(),o.rest instanceof AST_DefaultValue&&D(o.rest.start,"Invalid rest parameter");break}o.push(new AST_Spread({start:R.token,expression:(N(),r()),end:x()}))}else o.push(r());return U(e),o}var v=n(function(){return U("["),new AST_Array({elements:f("]",!g.strict,!0)})}),T=n(function(){return V(AST_Accessor)}),k=n(function(){U("{");for(var e=!0,n=[];!C("punc","}")&&(e?e=!1:U(","),g.strict||!C("punc","}"));){var t=R.token;if(C("operator","*")){N();var r=d(),a=R.token,o=V(AST_GeneratorFunction);o.start=a,o.end=x(),n.push(new AST_ObjectMethod({start:t,key:r,value:o,end:x()}))}else if(C("operator","..."))N(),n.push(new AST_Spread({start:t,expression:S(),end:x()}));else if(is_token(O(),"operator","=")){a=G(AST_SymbolRef);N(),n.push(new AST_ObjectKeyVal({start:t,key:t.value,value:new AST_Assign({start:t,left:a,operator:"=",right:S(),end:x()}),end:x()}))}else if(is_token(O(),"punc",",")||is_token(O(),"punc","}"))n.push(new AST_ObjectKeyVal({start:t,key:t.value,value:G(AST_SymbolRef),end:x()}));else{r=d();if(C("punc","(")){var s=R.token;(i=V(AST_Function)).start=s,i.end=x(),n.push(new AST_ObjectMethod({start:t,key:r,value:i,end:x()}))}else if(C("punc",":"))N(),n.push(new AST_ObjectKeyVal({start:t,key:r,value:S(),end:x()}));else{if("name"==t.type)switch(r){case"async":var i,u=C("operator","*")&&N(),s=(r=d(),R.token);(i=V(u?AST_AsyncGeneratorFunction:AST_AsyncFunction)).start=s,i.end=x(),n.push(new AST_ObjectMethod({start:t,key:r,value:i,end:x()}));continue;case"get":n.push(new AST_ObjectGetter({start:t,key:d(),value:T(),end:x()}));continue;case"set":n.push(new AST_ObjectSetter({start:t,key:d(),value:T(),end:x()}));continue}I()}}}return N(),new AST_Object({properties:n})});function d(){var e=R.token;switch(e.type){case"operator":KEYWORDS[e.value]||I();case"num":case"string":case"name":case"keyword":case"atom":return N(),""+e.value;case"punc":U("[");var n=S();return U("]"),n;default:I()}}function le(e,n){var t=n.value;switch(t){case"await":R.in_async&&I(n);break;case"super":e=AST_Super;break;case"this":e=AST_This;break;case"yield":R.in_generator&&I(n)}return new e({name:""+t,start:n,end:n})}function w(e){"arguments"!=e.name&&"eval"!=e.name&&"let"!=e.name||D(e.start,"Unexpected "+e.name+" in strict mode")}function G(e,n){return C("name")?(e=le(e,R.token),R.input.has_directive("use strict")&&e instanceof AST_SymbolDeclaration&&w(e),N(),e):(n||P("Name expected"),null)}function q(e){var n,t=R.token;if(C("punc","["))return N(),n=f("]",!g.strict,!0,function(){return c(e)}),new AST_DestructuredArray({start:t,elements:n,rest:n.rest||null,end:x()});if(C("punc","{")){N();for(var r=!0,a=[],o=null;!C("punc","}")&&(r?r=!1:U(","),g.strict||!C("punc","}"));){var s=R.token;if(C("punc","[")||is_token(O(),"punc",":")){var i=d();U(":"),a.push(new AST_DestructuredKeyVal({start:s,key:i,value:c(e),end:x()}))}else{if(C("operator","...")){N(),o=q(e);break}i=G(e);C("operator","=")&&(N(),i=new AST_DefaultValue({start:i.start,name:i,value:S(),end:x()})),a.push(new AST_DestructuredKeyVal({start:s,key:s.value,value:i,end:x()}))}}return U("}"),new AST_DestructuredObject({start:t,properties:a,rest:o,end:x()})}return G(e)}function c(e){var n=R.token,e=q(e);return C("operator","=")?(N(),new AST_DefaultValue({start:n,name:e,value:S(),end:x()})):e}function y(e){for(var n=e?e.start:R.token,t=R.input.context().read_template,r=[],a=[];t(r);)N(),a.push(J()),C("punc","}")||I();return N(),new AST_Template({start:n,expressions:a,strings:r,tag:e,end:x()})}function p(e,n){for(var t=e.start,r=null;;)if(C("operator","?")&&is_token(O(),"punc",".")&&(N(),N(),r=e),C("punc","[")){N();var a=J();U("]"),e=new AST_Sub({start:t,optional:r===e,expression:e,property:a,end:x()})}else if(n&&C("punc","("))N(),e=new AST_Call({start:t,optional:r===e,expression:e,args:f(")",!g.strict),end:x()});else if(r===e||C("punc","."))r!==e&&N(),e=new AST_Dot({start:t,optional:r===e,expression:e,property:(a=void 0,a=R.token.value,F("name"),a),end:x()});else{if(!C("punc","`"))break;r&&P("Invalid template on optional chain"),e=y(e)}if(r&&(e.terminal=!0),e instanceof AST_Call&&!e.pure)for(var o=(t=e.start).comments_before,s=HOP(t,"comments_before_length")?t.comments_before_length:o.length;0<=--s;)if(/[@#]__PURE__/.test(o[s].value)){e.pure=!0;break}return e}function o(e){var n,t,r=R.token;if(R.in_async&&C("name","await"))return R.in_funarg===R.in_function&&P("Invalid use of await in function argument"),R.input.context().regex_allowed=!0,N(),new AST_Await({start:r,expression:o(e),end:x()});if(R.in_generator&&C("name","yield"))return R.in_funarg===R.in_function&&P("Invalid use of yield in function argument"),R.input.context().regex_allowed=!0,N(),t=null,n=!1,C("operator","*")?(N(),t=S(e),n=!0):(C("punc")?PUNC_AFTER_EXPRESSION[R.token.value]:Z())||(t=S(e)),new AST_Yield({start:r,expression:t,nested:n,end:x()});if(C("operator")&&UNARY_PREFIX[r.value])return N(),j(),(t=s(AST_UnaryPrefix,r,o(e))).start=r,t.end=x(),t;for(var a=m(!0);C("operator")&&UNARY_POSTFIX[R.token.value]&&!H(R.token);)(a=s(AST_UnaryPostfix,R.token,a)).start=r,a.end=R.token,N();return a}function s(e,n,t){var r=n.value;switch(r){case"++":case"--":$(t)||D(n,"Invalid use of "+r+" operator");break;case"delete":t instanceof AST_SymbolRef&&R.input.has_directive("use strict")&&D(t.start,"Calling delete on expression not allowed in strict mode")}return new e({operator:r,expression:t})}var i=function(e,n,t){var r=C("operator")?R.token.value:null,a=null!=(r="in"==r&&t?null:r)?PRECEDENCE[r]:null;return null!=a&&n<a?(N(),a=i(o(t),"**"==r?a-1:a,t),i(new AST_Binary({start:e.start,left:e,operator:r,right:a,end:a.end}),n,t)):e};var u=function(e){var n,t=R.token,r=i(o(r=e),0,r);return C("operator","?")?(N(),n=S(),U(":"),new AST_Conditional({start:t,condition:r,consequent:n,alternative:S(e),end:x()})):r};function $(e){return e instanceof AST_PropAccess&&!e.optional||e instanceof AST_SymbolRef}function z(e){var n;if(e instanceof AST_Array)return t=null,(!(e.elements[e.elements.length-1]instanceof AST_Spread)||(t=z(e.elements.pop().expression))instanceof AST_Destructured||$(t))&&(n=e.elements.map(z),all(n,function(e){return e instanceof AST_DefaultValue||e instanceof AST_Destructured||e instanceof AST_Hole||$(e)}))?new AST_DestructuredArray({start:e.start,elements:n,rest:t,end:e.end}):e;if(e instanceof AST_Assign)return(n=z(e.left))instanceof AST_Destructured||$(n)?new AST_DefaultValue({start:e.start,name:n,value:e.right,end:e.end}):e;if(!(e instanceof AST_Object))return e;var t=null;if(e.properties[e.properties.length-1]instanceof AST_Spread&&!((t=z(e.properties.pop().expression))instanceof AST_Destructured||$(t)))return e;for(var r=[],a=0;a<e.properties.length;a++){var o=e.properties[a];if(!(o instanceof AST_ObjectKeyVal))return e;var s=z(o.value);if(!(s instanceof AST_DefaultValue||s instanceof AST_Destructured||$(s)))return e;r.push(new AST_DestructuredKeyVal({start:o.start,key:o.key,value:s,end:o.end}))}return new AST_DestructuredObject({start:e.start,properties:r,rest:t,end:e.end})}function S(e){var n=R.token,t=u(e),r=R.token.value;if(C("operator")&&ASSIGNMENT[r]){if($(t)||"="==r&&(t=z(t))instanceof AST_Destructured)return N(),new AST_Assign({start:n,left:t,operator:r,right:S(e),end:x()});P("Invalid assignment")}return t}function J(e,n){for(var t=R.token,r=[];;){if(n&&C("operator","...")){N(),r.rest=q(AST_SymbolFunarg);break}if(r.push(S(e)),!C("punc",","))break;if(N(),n&&C("punc",")")&&is_token(O(),"punc","=>"))break}return 1!=r.length||r.rest?new AST_Sequence({start:t,expressions:r,end:x()}):r[0]}function Q(e){++R.in_loop;e=e();return--R.in_loop,e}if(g.expression)return j(),e=J(),F("eof"),e;var e=R.token,b=[];for(g.module&&(R.in_async=!0,R.input.add_directive("use strict")),R.input.push_directives_stack();!C("eof");)b.push(Y(!0));R.input.pop_directives_stack();var h=x()||e,t=g.toplevel;return t?(t.body=t.body.concat(b),t.end=h):t=new AST_Toplevel({start:e,body:b,end:h}),t}